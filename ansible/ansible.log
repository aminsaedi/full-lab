2024-03-29 10:15:23,520 p=21942 u=amin n=ansible | [WARNING]: Found both group and host with same name: gitlab

2024-03-29 10:15:23,572 p=21942 u=amin n=ansible | PLAY [gitlab] ************************************************************************************************************************************
2024-03-29 10:15:23,577 p=21942 u=amin n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************
2024-03-29 10:15:23,592 p=21942 u=amin n=ansible | fatal: [gitlab]: FAILED! => {"msg": "The field 'remote_addr' has an invalid value, which includes an undefined variable. The error was: 'gitlab_host' is undefined. 'gitlab_host' is undefined. 'gitlab_host' is undefined. 'gitlab_host' is undefined"}
2024-03-29 10:15:23,593 p=21942 u=amin n=ansible | PLAY RECAP ***************************************************************************************************************************************
2024-03-29 10:15:23,593 p=21942 u=amin n=ansible | gitlab                     : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-03-29 10:17:36,749 p=22736 u=amin n=ansible | [WARNING]: Found both group and host with same name: gitlab

2024-03-29 10:17:36,797 p=22736 u=amin n=ansible | PLAY [gitlab] ************************************************************************************************************************************
2024-03-29 10:17:36,802 p=22736 u=amin n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************
2024-03-29 10:17:36,823 p=22736 u=amin n=ansible | fatal: [gitlab]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host localhost port 22: Connection refused", "unreachable": true}
2024-03-29 10:17:36,824 p=22736 u=amin n=ansible | PLAY RECAP ***************************************************************************************************************************************
2024-03-29 10:17:36,824 p=22736 u=amin n=ansible | gitlab                     : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2024-03-29 10:18:52,662 p=24339 u=amin n=ansible | [WARNING]: Found both group and host with same name: gitlab

2024-03-29 10:18:52,712 p=24339 u=amin n=ansible | PLAY [gitlab] ************************************************************************************************************************************
2024-03-29 10:18:52,716 p=24339 u=amin n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************
2024-03-29 10:18:52,820 p=24339 u=amin n=ansible | fatal: [gitlab]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: root@localhost: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).", "unreachable": true}
2024-03-29 10:18:52,821 p=24339 u=amin n=ansible | PLAY RECAP ***************************************************************************************************************************************
2024-03-29 10:18:52,821 p=24339 u=amin n=ansible | gitlab                     : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2024-03-29 10:38:17,853 p=30536 u=amin n=ansible | [WARNING]: Found both group and host with same name: gitlab

2024-03-29 10:38:17,906 p=30536 u=amin n=ansible | PLAY [gitlab] ******************************************************************************************************************************************
2024-03-29 10:38:17,910 p=30536 u=amin n=ansible | TASK [Gathering Facts] *********************************************************************************************************************************
2024-03-29 10:38:17,927 p=30536 u=amin n=ansible | fatal: [gitlab]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: hostname contains invalid characters", "unreachable": true}
2024-03-29 10:38:17,928 p=30536 u=amin n=ansible | PLAY RECAP *********************************************************************************************************************************************
2024-03-29 10:38:17,928 p=30536 u=amin n=ansible | gitlab                     : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2024-03-29 10:38:37,482 p=30747 u=amin n=ansible | [WARNING]: Found both group and host with same name: gitlab

2024-03-29 10:38:37,530 p=30747 u=amin n=ansible | PLAY [gitlab] ******************************************************************************************************************************************
2024-03-29 10:38:37,535 p=30747 u=amin n=ansible | TASK [Gathering Facts] *********************************************************************************************************************************
2024-03-29 10:38:37,553 p=30747 u=amin n=ansible | fatal: [gitlab]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: hostname contains invalid characters", "unreachable": true}
2024-03-29 10:38:37,553 p=30747 u=amin n=ansible | PLAY RECAP *********************************************************************************************************************************************
2024-03-29 10:38:37,553 p=30747 u=amin n=ansible | gitlab                     : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2024-03-29 10:44:01,932 p=31808 u=amin n=ansible | [WARNING]: Found both group and host with same name: gitlab

2024-03-29 10:44:01,985 p=31808 u=amin n=ansible | PLAY [gitlab] ******************************************************************************************************************************************
2024-03-29 10:44:01,989 p=31808 u=amin n=ansible | TASK [Gathering Facts] *********************************************************************************************************************************
2024-03-29 10:44:02,005 p=31808 u=amin n=ansible | fatal: [gitlab]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: hostname contains invalid characters", "unreachable": true}
2024-03-29 10:44:02,006 p=31808 u=amin n=ansible | PLAY RECAP *********************************************************************************************************************************************
2024-03-29 10:44:02,006 p=31808 u=amin n=ansible | gitlab                     : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2024-03-29 10:44:28,555 p=31892 u=amin n=ansible | PLAY [gitlab] ******************************************************************************************************************************************
2024-03-29 10:44:28,560 p=31892 u=amin n=ansible | TASK [Gathering Facts] *********************************************************************************************************************************
2024-03-29 10:44:30,965 p=31892 u=amin n=ansible | ok: [gitlab.aminsaedi.bio]
2024-03-29 10:44:30,976 p=31892 u=amin n=ansible | TASK [gitlab : Update system packages] *****************************************************************************************************************
2024-03-29 10:44:33,514 p=31892 u=amin n=ansible | changed: [gitlab.aminsaedi.bio]
2024-03-29 10:44:33,517 p=31892 u=amin n=ansible | TASK [gitlab : Upgrade system packages] ****************************************************************************************************************
2024-03-29 10:47:19,585 p=31892 u=amin n=ansible | changed: [gitlab.aminsaedi.bio]
2024-03-29 10:47:19,604 p=31892 u=amin n=ansible | PLAY RECAP *********************************************************************************************************************************************
2024-03-29 10:47:19,605 p=31892 u=amin n=ansible | gitlab.aminsaedi.bio       : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2024-03-29 10:47:25,467 p=32190 u=amin n=ansible | PLAY [gitlab] ******************************************************************************************************************************************
2024-03-29 10:47:25,472 p=32190 u=amin n=ansible | TASK [Gathering Facts] *********************************************************************************************************************************
2024-03-29 10:47:27,065 p=32190 u=amin n=ansible | ok: [gitlab.aminsaedi.bio]
2024-03-29 10:47:27,079 p=32190 u=amin n=ansible | TASK [gitlab : Update system packages] *****************************************************************************************************************
2024-03-29 10:47:29,602 p=32190 u=amin n=ansible | changed: [gitlab.aminsaedi.bio]
2024-03-29 10:47:29,607 p=32190 u=amin n=ansible | TASK [gitlab : Upgrade system packages] ****************************************************************************************************************
2024-03-29 10:47:31,381 p=32190 u=amin n=ansible | ok: [gitlab.aminsaedi.bio]
2024-03-29 10:47:31,396 p=32190 u=amin n=ansible | PLAY RECAP *********************************************************************************************************************************************
2024-03-29 10:47:31,396 p=32190 u=amin n=ansible | gitlab.aminsaedi.bio       : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2024-03-29 10:47:35,153 p=32342 u=amin n=ansible | PLAY [gitlab] ******************************************************************************************************************************************
2024-03-29 10:47:35,157 p=32342 u=amin n=ansible | TASK [Gathering Facts] *********************************************************************************************************************************
2024-03-29 10:47:36,740 p=32342 u=amin n=ansible | ok: [gitlab.aminsaedi.bio]
2024-03-29 10:47:36,749 p=32342 u=amin n=ansible | TASK [gitlab : Update system packages] *****************************************************************************************************************
2024-03-29 10:47:39,268 p=32342 u=amin n=ansible | changed: [gitlab.aminsaedi.bio]
2024-03-29 10:47:39,271 p=32342 u=amin n=ansible | TASK [gitlab : Upgrade system packages] ****************************************************************************************************************
2024-03-29 10:47:41,136 p=32342 u=amin n=ansible | ok: [gitlab.aminsaedi.bio]
2024-03-29 10:47:41,151 p=32342 u=amin n=ansible | PLAY RECAP *********************************************************************************************************************************************
2024-03-29 10:47:41,152 p=32342 u=amin n=ansible | gitlab.aminsaedi.bio       : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2024-03-29 10:50:08,380 p=33131 u=amin n=ansible | [WARNING]: Found both group and host with same name: gitlab

2024-03-29 10:50:08,433 p=33131 u=amin n=ansible | PLAY [gitlab] ******************************************************************************************************************************************
2024-03-29 10:50:08,438 p=33131 u=amin n=ansible | TASK [Gathering Facts] *********************************************************************************************************************************
2024-03-29 10:50:11,222 p=33131 u=amin n=ansible | ok: [gitlab]
2024-03-29 10:50:11,236 p=33131 u=amin n=ansible | TASK [gitlab : Update system packages] *****************************************************************************************************************
2024-03-29 10:50:13,901 p=33131 u=amin n=ansible | changed: [gitlab]
2024-03-29 10:50:13,904 p=33131 u=amin n=ansible | TASK [gitlab : Upgrade system packages] ****************************************************************************************************************
2024-03-29 10:50:16,417 p=33131 u=amin n=ansible | ok: [gitlab]
2024-03-29 10:50:16,432 p=33131 u=amin n=ansible | PLAY RECAP *********************************************************************************************************************************************
2024-03-29 10:50:16,433 p=33131 u=amin n=ansible | gitlab                     : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2024-03-29 10:50:32,104 p=33425 u=amin n=ansible | PLAY [gitlab] ******************************************************************************************************************************************
2024-03-29 10:50:32,109 p=33425 u=amin n=ansible | TASK [Gathering Facts] *********************************************************************************************************************************
2024-03-29 10:50:33,735 p=33425 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 10:50:33,743 p=33425 u=amin n=ansible | TASK [gitlab : Update system packages] *****************************************************************************************************************
2024-03-29 10:50:36,330 p=33425 u=amin n=ansible | changed: [gitlab-server]
2024-03-29 10:50:36,333 p=33425 u=amin n=ansible | TASK [gitlab : Upgrade system packages] ****************************************************************************************************************
2024-03-29 10:50:38,263 p=33425 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 10:50:38,278 p=33425 u=amin n=ansible | PLAY RECAP *********************************************************************************************************************************************
2024-03-29 10:50:38,279 p=33425 u=amin n=ansible | gitlab-server              : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2024-03-29 11:03:30,735 p=35331 u=amin n=ansible | PLAY [gitlab] ******************************************************************************************************************************************
2024-03-29 11:03:30,740 p=35331 u=amin n=ansible | TASK [Gathering Facts] *********************************************************************************************************************************
2024-03-29 11:03:54,410 p=35331 u=amin n=ansible |  [ERROR]: User interrupted execution

2024-03-29 11:04:00,540 p=35579 u=amin n=ansible | ERROR! the playbook: gitlab_host=gitlab.aminsaedi.bio could not be found
2024-03-29 11:04:19,393 p=35786 u=amin n=ansible | ERROR! the playbook: playbook.yml could not be found
2024-03-29 11:04:30,711 p=36107 u=amin n=ansible | PLAY [gitlab] ******************************************************************************************************************************************
2024-03-29 11:04:30,715 p=36107 u=amin n=ansible | TASK [Gathering Facts] *********************************************************************************************************************************
2024-03-29 11:04:32,424 p=36107 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:04:32,432 p=36107 u=amin n=ansible | TASK [gitlab : Update system packages] *****************************************************************************************************************
2024-03-29 11:04:33,730 p=36107 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:04:33,733 p=36107 u=amin n=ansible | TASK [gitlab : Install dependencies] *******************************************************************************************************************
2024-03-29 11:04:35,391 p=36107 u=amin n=ansible | ok: [gitlab-server] => (item=curl)
2024-03-29 11:04:36,889 p=36107 u=amin n=ansible | ok: [gitlab-server] => (item=openssh-server)
2024-03-29 11:04:38,661 p=36107 u=amin n=ansible | ok: [gitlab-server] => (item=ca-certificates)
2024-03-29 11:04:40,082 p=36107 u=amin n=ansible | ok: [gitlab-server] => (item=tzdata)
2024-03-29 11:04:41,552 p=36107 u=amin n=ansible | ok: [gitlab-server] => (item=perl)
2024-03-29 11:05:16,437 p=36107 u=amin n=ansible | changed: [gitlab-server] => (item=postfix)
2024-03-29 11:05:16,443 p=36107 u=amin n=ansible | TASK [gitlab : Check if /etc/gitlab exists] ************************************************************************************************************
2024-03-29 11:05:17,052 p=36107 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:05:17,058 p=36107 u=amin n=ansible | TASK [gitlab : Run gitlab install script] **************************************************************************************************************
2024-03-29 11:05:17,776 p=36107 u=amin n=ansible | fatal: [gitlab-server]: FAILED! => {"changed": true, "cmd": ["curl", "https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.deb.sh", "|", "sudo", "bash"], "delta": "0:00:00.138619", "end": "2024-03-29 15:05:17.713615", "msg": "non-zero return code", "rc": 6, "start": "2024-03-29 15:05:17.574996", "stderr": "  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r100  6865  100  6865    0     0  58675      0 --:--:-- --:--:-- --:--:-- 58177\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0curl: (6) Could not resolve host: |\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0curl: (6) Could not resolve host: sudo\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0curl: (6) Could not resolve host: bash", "stderr_lines": ["  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current", "                                 Dload  Upload   Total   Spent    Left  Speed", "", "  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0", "  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0", "100  6865  100  6865    0     0  58675      0 --:--:-- --:--:-- --:--:-- 58177", "  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current", "                                 Dload  Upload   Total   Spent    Left  Speed", "", "  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0curl: (6) Could not resolve host: |", "  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current", "                                 Dload  Upload   Total   Spent    Left  Speed", "", "  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0curl: (6) Could not resolve host: sudo", "  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current", "                                 Dload  Upload   Total   Spent    Left  Speed", "", "  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0curl: (6) Could not resolve host: bash"], "stdout": "#!/bin/bash\n\nunknown_os ()\n{\n  echo \"Unfortunately, your operating system distribution and version are not supported by this script.\"\n  echo\n  echo \"You can override the OS detection by setting os= and dist= prior to running this script.\"\n  echo \"You can find a list of supported OSes and distributions on our website: https://packages.gitlab.com/docs#os_distro_version\"\n  echo\n  echo \"For example, to force Ubuntu Trusty: os=ubuntu dist=trusty ./script.sh\"\n  echo\n  echo \"Please email support@packagecloud.io and let us know if you run into any issues.\"\n  exit 1\n}\n\ngpg_check ()\n{\n  echo \"Checking for gpg...\"\n  if command -v gpg > /dev/null; then\n    echo \"Detected gpg...\"\n  else\n    echo \"Installing gnupg for GPG verification...\"\n    apt-get install -y gnupg\n    if [ \"$?\" -ne \"0\" ]; then\n      echo \"Unable to install GPG! Your base system has a problem; please check your default OS's package repositories because GPG should work.\"\n      echo \"Repository installation aborted.\"\n      exit 1\n    fi\n  fi\n}\n\ncurl_check ()\n{\n  echo \"Checking for curl...\"\n  if command -v curl > /dev/null; then\n    echo \"Detected curl...\"\n  else\n    echo \"Installing curl...\"\n    apt-get install -q -y curl\n    if [ \"$?\" -ne \"0\" ]; then\n      echo \"Unable to install curl! Your base system has a problem; please check your default OS's package repositories because curl should work.\"\n      echo \"Repository installation aborted.\"\n      exit 1\n    fi\n  fi\n}\n\ninstall_debian_keyring ()\n{\n  if [ \"${os,,}\" = \"debian\" ]; then\n    echo \"Installing debian-archive-keyring which is needed for installing \"\n    echo \"apt-transport-https on many Debian systems.\"\n    apt-get install -y debian-archive-keyring &> /dev/null\n  fi\n}\n\n\ndetect_os ()\n{\n  if [[ ( -z \"${os}\" ) && ( -z \"${dist}\" ) ]]; then\n    # some systems dont have lsb-release yet have the lsb_release binary and\n    # vice-versa\n    if [ -e /etc/lsb-release ]; then\n      . /etc/lsb-release\n\n      if [ \"${ID}\" = \"raspbian\" ]; then\n        os=${ID}\n        dist=`cut --delimiter='.' -f1 /etc/debian_version`\n      else\n        os=${DISTRIB_ID}\n        dist=${DISTRIB_CODENAME}\n\n        if [ -z \"$dist\" ]; then\n          dist=${DISTRIB_RELEASE}\n        fi\n      fi\n\n    elif [ `which lsb_release 2>/dev/null` ]; then\n      dist=`lsb_release -c | cut -f2`\n      os=`lsb_release -i | cut -f2 | awk '{ print tolower($1) }'`\n\n    elif [ -e /etc/debian_version ]; then\n      # some Debians have jessie/sid in their /etc/debian_version\n      # while others have '6.0.7'\n      os=`cat /etc/issue | head -1 | awk '{ print tolower($1) }'`\n      if grep -q '/' /etc/debian_version; then\n        dist=`cut --delimiter='/' -f1 /etc/debian_version`\n      else\n        dist=`cut --delimiter='.' -f1 /etc/debian_version`\n      fi\n\n    else\n      unknown_os\n    fi\n  fi\n\n  if [ -z \"$dist\" ]; then\n    unknown_os\n  fi\n\n  # remove whitespace from OS and dist name\n  os=\"${os// /}\"\n  dist=\"${dist// /}\"\n\n  echo \"Detected operating system as $os/$dist.\"\n}\n\ndetect_version_id () {\n  # detect version_id and round down float to integer\n  if [ -f /etc/os-release ]; then\n    . /etc/os-release\n    version_id=${VERSION_ID%%.*}\n  elif [ -f /usr/lib/os-release ]; then\n    . /usr/lib/os-release\n    version_id=${VERSION_ID%%.*}\n  else\n    version_id=\"1\"\n  fi\n}\n\nmain ()\n{\n  detect_os\n  curl_check\n  gpg_check\n  detect_version_id\n\n  # Need to first run apt-get update so that apt-transport-https can be\n  # installed\n  echo -n \"Running apt-get update... \"\n  apt-get update &> /dev/null\n  echo \"done.\"\n\n  # Install the debian-archive-keyring package on debian systems so that\n  # apt-transport-https can be installed next\n  install_debian_keyring\n\n  echo -n \"Installing apt-transport-https... \"\n  apt-get install -y apt-transport-https &> /dev/null\n  echo \"done.\"\n\n\n  gpg_key_url=\"https://packages.gitlab.com/gitlab/gitlab-ee/gpgkey\"\n  apt_config_url=\"https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/config_file.list?os=${os}&dist=${dist}&source=script\"\n\n  apt_source_path=\"/etc/apt/sources.list.d/gitlab_gitlab-ee.list\"\n  gpg_keyring_path=\"/usr/share/keyrings/gitlab_gitlab-ee-archive-keyring.gpg\"\n\n  echo -n \"Installing $apt_source_path...\"\n\n  # create an apt config file for this repository\n  curl -sSf \"${apt_config_url}\" > $apt_source_path\n  curl_exit_code=$?\n\n  if [ \"$curl_exit_code\" = \"22\" ]; then\n    echo\n    echo\n    echo -n \"Unable to download repo config from: \"\n    echo \"${apt_config_url}\"\n    echo\n    echo \"This usually happens if your operating system is not supported by \"\n    echo \"packagecloud.io, or this script's OS detection failed.\"\n    echo\n    echo \"You can override the OS detection by setting os= and dist= prior to running this script.\"\n    echo \"You can find a list of supported OSes and distributions on our website: https://packages.gitlab.com/docs#os_distro_version\"\n    echo\n    echo \"For example, to force Ubuntu Trusty: os=ubuntu dist=trusty ./script.sh\"\n    echo\n    echo \"If you are running a supported OS, please email support@packagecloud.io and report this.\"\n    [ -e $apt_source_path ] && rm $apt_source_path\n    exit 1\n  elif [ \"$curl_exit_code\" = \"35\" -o \"$curl_exit_code\" = \"60\" ]; then\n    echo \"curl is unable to connect to packagecloud.io over TLS when running: \"\n    echo \"    curl ${apt_config_url}\"\n    echo \"This is usually due to one of two things:\"\n    echo\n    echo \" 1.) Missing CA root certificates (make sure the ca-certificates package is installed)\"\n    echo \" 2.) An old version of libssl. Try upgrading libssl on your system to a more recent version\"\n    echo\n    echo \"Contact support@packagecloud.io with information about your system for help.\"\n    [ -e $apt_source_path ] && rm $apt_source_path\n    exit 1\n  elif [ \"$curl_exit_code\" -gt \"0\" ]; then\n    echo\n    echo \"Unable to run: \"\n    echo \"    curl ${apt_config_url}\"\n    echo\n    echo \"Double check your curl installation and try again.\"\n    [ -e $apt_source_path ] && rm $apt_source_path\n    exit 1\n  else\n    echo \"done.\"\n  fi\n\n  echo -n \"Importing packagecloud gpg key... \"\n  # import the gpg key\n  curl -fsSL \"${gpg_key_url}\" | gpg --dearmor > ${gpg_keyring_path}\n  # check for os/dist based on pre debian stretch\n  if\n  { [ \"${os,,}\" = \"debian\" ] && [ \"${version_id}\" -lt 9 ]; } ||\n  { [ \"${os,,}\" = \"ubuntu\" ] && [ \"${version_id}\" -lt 16 ]; } ||\n  { [ \"${os,,}\" = \"linuxmint\" ] && [ \"${version_id}\" -lt 19 ]; } ||\n  { [ \"${os,,}\" = \"raspbian\" ] && [ \"${version_id}\" -lt 9 ]; } ||\n  { { [ \"${os,,}\" = \"elementaryos\" ] || [ \"${os,,}\" = \"elementary\" ]; } && [ \"${version_id}\" -lt 5 ]; }\n  then\n    # move to trusted.gpg.d\n    mv ${gpg_keyring_path} /etc/apt/trusted.gpg.d/gitlab_gitlab-ee.gpg\n  fi\n  echo \"done.\"\n\n  echo -n \"Running apt-get update... \"\n  # update apt on this system\n  apt-get update &> /dev/null\n  echo \"done.\"\n\n  echo\n  echo \"The repository is setup! You can now install packages.\"\n}\n\nmain", "stdout_lines": ["#!/bin/bash", "", "unknown_os ()", "{", "  echo \"Unfortunately, your operating system distribution and version are not supported by this script.\"", "  echo", "  echo \"You can override the OS detection by setting os= and dist= prior to running this script.\"", "  echo \"You can find a list of supported OSes and distributions on our website: https://packages.gitlab.com/docs#os_distro_version\"", "  echo", "  echo \"For example, to force Ubuntu Trusty: os=ubuntu dist=trusty ./script.sh\"", "  echo", "  echo \"Please email support@packagecloud.io and let us know if you run into any issues.\"", "  exit 1", "}", "", "gpg_check ()", "{", "  echo \"Checking for gpg...\"", "  if command -v gpg > /dev/null; then", "    echo \"Detected gpg...\"", "  else", "    echo \"Installing gnupg for GPG verification...\"", "    apt-get install -y gnupg", "    if [ \"$?\" -ne \"0\" ]; then", "      echo \"Unable to install GPG! Your base system has a problem; please check your default OS's package repositories because GPG should work.\"", "      echo \"Repository installation aborted.\"", "      exit 1", "    fi", "  fi", "}", "", "curl_check ()", "{", "  echo \"Checking for curl...\"", "  if command -v curl > /dev/null; then", "    echo \"Detected curl...\"", "  else", "    echo \"Installing curl...\"", "    apt-get install -q -y curl", "    if [ \"$?\" -ne \"0\" ]; then", "      echo \"Unable to install curl! Your base system has a problem; please check your default OS's package repositories because curl should work.\"", "      echo \"Repository installation aborted.\"", "      exit 1", "    fi", "  fi", "}", "", "install_debian_keyring ()", "{", "  if [ \"${os,,}\" = \"debian\" ]; then", "    echo \"Installing debian-archive-keyring which is needed for installing \"", "    echo \"apt-transport-https on many Debian systems.\"", "    apt-get install -y debian-archive-keyring &> /dev/null", "  fi", "}", "", "", "detect_os ()", "{", "  if [[ ( -z \"${os}\" ) && ( -z \"${dist}\" ) ]]; then", "    # some systems dont have lsb-release yet have the lsb_release binary and", "    # vice-versa", "    if [ -e /etc/lsb-release ]; then", "      . /etc/lsb-release", "", "      if [ \"${ID}\" = \"raspbian\" ]; then", "        os=${ID}", "        dist=`cut --delimiter='.' -f1 /etc/debian_version`", "      else", "        os=${DISTRIB_ID}", "        dist=${DISTRIB_CODENAME}", "", "        if [ -z \"$dist\" ]; then", "          dist=${DISTRIB_RELEASE}", "        fi", "      fi", "", "    elif [ `which lsb_release 2>/dev/null` ]; then", "      dist=`lsb_release -c | cut -f2`", "      os=`lsb_release -i | cut -f2 | awk '{ print tolower($1) }'`", "", "    elif [ -e /etc/debian_version ]; then", "      # some Debians have jessie/sid in their /etc/debian_version", "      # while others have '6.0.7'", "      os=`cat /etc/issue | head -1 | awk '{ print tolower($1) }'`", "      if grep -q '/' /etc/debian_version; then", "        dist=`cut --delimiter='/' -f1 /etc/debian_version`", "      else", "        dist=`cut --delimiter='.' -f1 /etc/debian_version`", "      fi", "", "    else", "      unknown_os", "    fi", "  fi", "", "  if [ -z \"$dist\" ]; then", "    unknown_os", "  fi", "", "  # remove whitespace from OS and dist name", "  os=\"${os// /}\"", "  dist=\"${dist// /}\"", "", "  echo \"Detected operating system as $os/$dist.\"", "}", "", "detect_version_id () {", "  # detect version_id and round down float to integer", "  if [ -f /etc/os-release ]; then", "    . /etc/os-release", "    version_id=${VERSION_ID%%.*}", "  elif [ -f /usr/lib/os-release ]; then", "    . /usr/lib/os-release", "    version_id=${VERSION_ID%%.*}", "  else", "    version_id=\"1\"", "  fi", "}", "", "main ()", "{", "  detect_os", "  curl_check", "  gpg_check", "  detect_version_id", "", "  # Need to first run apt-get update so that apt-transport-https can be", "  # installed", "  echo -n \"Running apt-get update... \"", "  apt-get update &> /dev/null", "  echo \"done.\"", "", "  # Install the debian-archive-keyring package on debian systems so that", "  # apt-transport-https can be installed next", "  install_debian_keyring", "", "  echo -n \"Installing apt-transport-https... \"", "  apt-get install -y apt-transport-https &> /dev/null", "  echo \"done.\"", "", "", "  gpg_key_url=\"https://packages.gitlab.com/gitlab/gitlab-ee/gpgkey\"", "  apt_config_url=\"https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/config_file.list?os=${os}&dist=${dist}&source=script\"", "", "  apt_source_path=\"/etc/apt/sources.list.d/gitlab_gitlab-ee.list\"", "  gpg_keyring_path=\"/usr/share/keyrings/gitlab_gitlab-ee-archive-keyring.gpg\"", "", "  echo -n \"Installing $apt_source_path...\"", "", "  # create an apt config file for this repository", "  curl -sSf \"${apt_config_url}\" > $apt_source_path", "  curl_exit_code=$?", "", "  if [ \"$curl_exit_code\" = \"22\" ]; then", "    echo", "    echo", "    echo -n \"Unable to download repo config from: \"", "    echo \"${apt_config_url}\"", "    echo", "    echo \"This usually happens if your operating system is not supported by \"", "    echo \"packagecloud.io, or this script's OS detection failed.\"", "    echo", "    echo \"You can override the OS detection by setting os= and dist= prior to running this script.\"", "    echo \"You can find a list of supported OSes and distributions on our website: https://packages.gitlab.com/docs#os_distro_version\"", "    echo", "    echo \"For example, to force Ubuntu Trusty: os=ubuntu dist=trusty ./script.sh\"", "    echo", "    echo \"If you are running a supported OS, please email support@packagecloud.io and report this.\"", "    [ -e $apt_source_path ] && rm $apt_source_path", "    exit 1", "  elif [ \"$curl_exit_code\" = \"35\" -o \"$curl_exit_code\" = \"60\" ]; then", "    echo \"curl is unable to connect to packagecloud.io over TLS when running: \"", "    echo \"    curl ${apt_config_url}\"", "    echo \"This is usually due to one of two things:\"", "    echo", "    echo \" 1.) Missing CA root certificates (make sure the ca-certificates package is installed)\"", "    echo \" 2.) An old version of libssl. Try upgrading libssl on your system to a more recent version\"", "    echo", "    echo \"Contact support@packagecloud.io with information about your system for help.\"", "    [ -e $apt_source_path ] && rm $apt_source_path", "    exit 1", "  elif [ \"$curl_exit_code\" -gt \"0\" ]; then", "    echo", "    echo \"Unable to run: \"", "    echo \"    curl ${apt_config_url}\"", "    echo", "    echo \"Double check your curl installation and try again.\"", "    [ -e $apt_source_path ] && rm $apt_source_path", "    exit 1", "  else", "    echo \"done.\"", "  fi", "", "  echo -n \"Importing packagecloud gpg key... \"", "  # import the gpg key", "  curl -fsSL \"${gpg_key_url}\" | gpg --dearmor > ${gpg_keyring_path}", "  # check for os/dist based on pre debian stretch", "  if", "  { [ \"${os,,}\" = \"debian\" ] && [ \"${version_id}\" -lt 9 ]; } ||", "  { [ \"${os,,}\" = \"ubuntu\" ] && [ \"${version_id}\" -lt 16 ]; } ||", "  { [ \"${os,,}\" = \"linuxmint\" ] && [ \"${version_id}\" -lt 19 ]; } ||", "  { [ \"${os,,}\" = \"raspbian\" ] && [ \"${version_id}\" -lt 9 ]; } ||", "  { { [ \"${os,,}\" = \"elementaryos\" ] || [ \"${os,,}\" = \"elementary\" ]; } && [ \"${version_id}\" -lt 5 ]; }", "  then", "    # move to trusted.gpg.d", "    mv ${gpg_keyring_path} /etc/apt/trusted.gpg.d/gitlab_gitlab-ee.gpg", "  fi", "  echo \"done.\"", "", "  echo -n \"Running apt-get update... \"", "  # update apt on this system", "  apt-get update &> /dev/null", "  echo \"done.\"", "", "  echo", "  echo \"The repository is setup! You can now install packages.\"", "}", "", "main"]}
2024-03-29 11:05:17,776 p=36107 u=amin n=ansible | PLAY RECAP *********************************************************************************************************************************************
2024-03-29 11:05:17,777 p=36107 u=amin n=ansible | gitlab-server              : ok=4    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-03-29 11:07:35,541 p=37451 u=amin n=ansible | PLAY [gitlab] ******************************************************************************************************************************************
2024-03-29 11:07:35,545 p=37451 u=amin n=ansible | TASK [Gathering Facts] *********************************************************************************************************************************
2024-03-29 11:07:37,823 p=37451 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:07:37,840 p=37451 u=amin n=ansible | TASK [gitlab : Update system packages] *****************************************************************************************************************
2024-03-29 11:07:38,985 p=37451 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:07:38,988 p=37451 u=amin n=ansible | TASK [gitlab : Install dependencies] *******************************************************************************************************************
2024-03-29 11:07:40,550 p=37451 u=amin n=ansible | ok: [gitlab-server] => (item=curl)
2024-03-29 11:07:42,242 p=37451 u=amin n=ansible | ok: [gitlab-server] => (item=openssh-server)
2024-03-29 11:07:44,094 p=37451 u=amin n=ansible | ok: [gitlab-server] => (item=ca-certificates)
2024-03-29 11:07:45,665 p=37451 u=amin n=ansible | ok: [gitlab-server] => (item=tzdata)
2024-03-29 11:07:47,200 p=37451 u=amin n=ansible | ok: [gitlab-server] => (item=perl)
2024-03-29 11:07:48,696 p=37451 u=amin n=ansible | ok: [gitlab-server] => (item=postfix)
2024-03-29 11:07:50,364 p=37451 u=amin n=ansible | ok: [gitlab-server] => (item=apt-transport-https)
2024-03-29 11:07:50,368 p=37451 u=amin n=ansible | TASK [gitlab : Check if /etc/gitlab exists] ************************************************************************************************************
2024-03-29 11:07:50,944 p=37451 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:07:50,948 p=37451 u=amin n=ansible | TASK [gitlab : Run gitlab install script] **************************************************************************************************************
2024-03-29 11:07:51,509 p=37451 u=amin n=ansible | fatal: [gitlab-server]: FAILED! => {"changed": false, "cmd": "os=ubuntu dist=focal curl https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.deb.sh '|' sudo bash", "msg": "[Errno 2] No such file or directory: b'os=ubuntu'", "rc": 2, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2024-03-29 11:07:51,510 p=37451 u=amin n=ansible | PLAY RECAP *********************************************************************************************************************************************
2024-03-29 11:07:51,510 p=37451 u=amin n=ansible | gitlab-server              : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-03-29 11:09:17,742 p=38103 u=amin n=ansible | PLAY [gitlab] ******************************************************************************************************************************************
2024-03-29 11:09:17,747 p=38103 u=amin n=ansible | TASK [Gathering Facts] *********************************************************************************************************************************
2024-03-29 11:09:20,206 p=38103 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:09:20,220 p=38103 u=amin n=ansible | TASK [gitlab : Update system packages] *****************************************************************************************************************
2024-03-29 11:09:21,329 p=38103 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:09:21,332 p=38103 u=amin n=ansible | TASK [gitlab : Install dependencies] *******************************************************************************************************************
2024-03-29 11:09:22,789 p=38103 u=amin n=ansible | ok: [gitlab-server] => (item=curl)
2024-03-29 11:09:24,321 p=38103 u=amin n=ansible | ok: [gitlab-server] => (item=openssh-server)
2024-03-29 11:09:25,699 p=38103 u=amin n=ansible | ok: [gitlab-server] => (item=ca-certificates)
2024-03-29 11:09:27,167 p=38103 u=amin n=ansible | ok: [gitlab-server] => (item=tzdata)
2024-03-29 11:09:28,618 p=38103 u=amin n=ansible | ok: [gitlab-server] => (item=perl)
2024-03-29 11:09:30,155 p=38103 u=amin n=ansible | ok: [gitlab-server] => (item=postfix)
2024-03-29 11:09:31,690 p=38103 u=amin n=ansible | ok: [gitlab-server] => (item=apt-transport-https)
2024-03-29 11:09:31,694 p=38103 u=amin n=ansible | TASK [gitlab : Check if /etc/gitlab exists] ************************************************************************************************************
2024-03-29 11:09:32,237 p=38103 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:09:32,241 p=38103 u=amin n=ansible | TASK [gitlab : Run gitlab install script] **************************************************************************************************************
2024-03-29 11:09:32,357 p=38103 u=amin n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: If you are using a module and expect the file to exist on the remote, see the remote_src option
2024-03-29 11:09:32,358 p=38103 u=amin n=ansible | fatal: [gitlab-server]: FAILED! => {"changed": false, "msg": "Could not find or access 'os=ubuntu'\nSearched in:\n\t/home/amin/w/devops/full-lab/ansible/roles/gitlab/files/os=ubuntu\n\t/home/amin/w/devops/full-lab/ansible/roles/gitlab/os=ubuntu\n\t/home/amin/w/devops/full-lab/ansible/roles/gitlab/tasks/files/os=ubuntu\n\t/home/amin/w/devops/full-lab/ansible/roles/gitlab/tasks/os=ubuntu\n\t/home/amin/w/devops/full-lab/ansible/playbooks/files/os=ubuntu\n\t/home/amin/w/devops/full-lab/ansible/playbooks/os=ubuntu on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2024-03-29 11:09:32,358 p=38103 u=amin n=ansible | PLAY RECAP *********************************************************************************************************************************************
2024-03-29 11:09:32,358 p=38103 u=amin n=ansible | gitlab-server              : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-03-29 11:10:34,884 p=38685 u=amin n=ansible | PLAY [gitlab] ******************************************************************************************************************************************
2024-03-29 11:10:34,889 p=38685 u=amin n=ansible | TASK [Gathering Facts] *********************************************************************************************************************************
2024-03-29 11:10:37,227 p=38685 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:10:37,238 p=38685 u=amin n=ansible | TASK [gitlab : Update system packages] *****************************************************************************************************************
2024-03-29 11:10:38,407 p=38685 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:10:38,411 p=38685 u=amin n=ansible | TASK [gitlab : Install dependencies] *******************************************************************************************************************
2024-03-29 11:10:39,927 p=38685 u=amin n=ansible | ok: [gitlab-server] => (item=curl)
2024-03-29 11:10:41,465 p=38685 u=amin n=ansible | ok: [gitlab-server] => (item=openssh-server)
2024-03-29 11:10:43,015 p=38685 u=amin n=ansible | ok: [gitlab-server] => (item=ca-certificates)
2024-03-29 11:10:44,607 p=38685 u=amin n=ansible | ok: [gitlab-server] => (item=tzdata)
2024-03-29 11:10:46,045 p=38685 u=amin n=ansible | ok: [gitlab-server] => (item=perl)
2024-03-29 11:10:47,529 p=38685 u=amin n=ansible | ok: [gitlab-server] => (item=postfix)
2024-03-29 11:10:49,027 p=38685 u=amin n=ansible | ok: [gitlab-server] => (item=apt-transport-https)
2024-03-29 11:10:49,033 p=38685 u=amin n=ansible | TASK [gitlab : Check if /etc/gitlab exists] ************************************************************************************************************
2024-03-29 11:10:49,552 p=38685 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:10:49,556 p=38685 u=amin n=ansible | TASK [gitlab : Run gitlab install script] **************************************************************************************************************
2024-03-29 11:10:56,667 p=38685 u=amin n=ansible | changed: [gitlab-server]
2024-03-29 11:10:56,673 p=38685 u=amin n=ansible | TASK [gitlab : Fetch the root password] ****************************************************************************************************************
2024-03-29 11:10:57,271 p=38685 u=amin n=ansible | fatal: [gitlab-server]: FAILED! => {"changed": false, "msg": "the remote file does not exist, not transferring, ignored"}
2024-03-29 11:10:57,272 p=38685 u=amin n=ansible | PLAY RECAP *********************************************************************************************************************************************
2024-03-29 11:10:57,272 p=38685 u=amin n=ansible | gitlab-server              : ok=5    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-03-29 11:13:30,229 p=39342 u=amin n=ansible | PLAY [gitlab] ******************************************************************************************************************************************
2024-03-29 11:13:30,234 p=39342 u=amin n=ansible | TASK [Gathering Facts] *********************************************************************************************************************************
2024-03-29 11:13:32,807 p=39342 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:13:32,819 p=39342 u=amin n=ansible | TASK [gitlab : Update system packages] *****************************************************************************************************************
2024-03-29 11:13:34,169 p=39342 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:13:34,172 p=39342 u=amin n=ansible | TASK [gitlab : Install dependencies] *******************************************************************************************************************
2024-03-29 11:13:35,873 p=39342 u=amin n=ansible | ok: [gitlab-server] => (item=curl)
2024-03-29 11:13:37,521 p=39342 u=amin n=ansible | ok: [gitlab-server] => (item=openssh-server)
2024-03-29 11:13:39,041 p=39342 u=amin n=ansible | ok: [gitlab-server] => (item=ca-certificates)
2024-03-29 11:13:40,469 p=39342 u=amin n=ansible | ok: [gitlab-server] => (item=tzdata)
2024-03-29 11:13:42,089 p=39342 u=amin n=ansible | ok: [gitlab-server] => (item=perl)
2024-03-29 11:13:43,761 p=39342 u=amin n=ansible | ok: [gitlab-server] => (item=postfix)
2024-03-29 11:13:45,187 p=39342 u=amin n=ansible | ok: [gitlab-server] => (item=apt-transport-https)
2024-03-29 11:13:45,194 p=39342 u=amin n=ansible | TASK [gitlab : Check if /etc/gitlab exists] ************************************************************************************************************
2024-03-29 11:13:45,704 p=39342 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:13:45,708 p=39342 u=amin n=ansible | TASK [gitlab : Add GitLab repository] ******************************************************************************************************************
2024-03-29 11:13:52,619 p=39342 u=amin n=ansible | changed: [gitlab-server]
2024-03-29 11:13:52,623 p=39342 u=amin n=ansible | TASK [gitlab : Install GitLab] *************************************************************************************************************************
2024-03-29 11:13:53,823 p=39342 u=amin n=ansible | fatal: [gitlab-server]: FAILED! => {"changed": false, "msg": "No package matching 'gitlab-ce' is available"}
2024-03-29 11:13:53,824 p=39342 u=amin n=ansible | PLAY RECAP *********************************************************************************************************************************************
2024-03-29 11:13:53,824 p=39342 u=amin n=ansible | gitlab-server              : ok=5    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-03-29 11:15:22,245 p=40061 u=amin n=ansible | PLAY [gitlab] ******************************************************************************************************************************************
2024-03-29 11:15:22,250 p=40061 u=amin n=ansible | TASK [Gathering Facts] *********************************************************************************************************************************
2024-03-29 11:15:26,545 p=40061 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:15:26,559 p=40061 u=amin n=ansible | TASK [gitlab : Update system packages] *****************************************************************************************************************
2024-03-29 11:15:27,762 p=40061 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:15:27,765 p=40061 u=amin n=ansible | TASK [gitlab : Install dependencies] *******************************************************************************************************************
2024-03-29 11:15:29,141 p=40061 u=amin n=ansible | ok: [gitlab-server] => (item=curl)
2024-03-29 11:15:31,225 p=40061 u=amin n=ansible | ok: [gitlab-server] => (item=openssh-server)
2024-03-29 11:15:32,940 p=40061 u=amin n=ansible | ok: [gitlab-server] => (item=ca-certificates)
2024-03-29 11:15:34,754 p=40061 u=amin n=ansible | ok: [gitlab-server] => (item=tzdata)
2024-03-29 11:15:36,554 p=40061 u=amin n=ansible | ok: [gitlab-server] => (item=perl)
2024-03-29 11:15:38,204 p=40061 u=amin n=ansible | ok: [gitlab-server] => (item=postfix)
2024-03-29 11:15:39,708 p=40061 u=amin n=ansible | ok: [gitlab-server] => (item=apt-transport-https)
2024-03-29 11:15:39,712 p=40061 u=amin n=ansible | TASK [gitlab : Check if /etc/gitlab exists] ************************************************************************************************************
2024-03-29 11:15:40,237 p=40061 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:15:40,240 p=40061 u=amin n=ansible | TASK [gitlab : Add GitLab repository] ******************************************************************************************************************
2024-03-29 11:15:47,443 p=40061 u=amin n=ansible | changed: [gitlab-server]
2024-03-29 11:15:47,446 p=40061 u=amin n=ansible | TASK [gitlab : Install GitLab] *************************************************************************************************************************
2024-03-29 11:19:11,227 p=40061 u=amin n=ansible | changed: [gitlab-server]
2024-03-29 11:19:11,231 p=40061 u=amin n=ansible | TASK [gitlab : Fetch the root password] ****************************************************************************************************************
2024-03-29 11:19:11,767 p=40061 u=amin n=ansible | fatal: [gitlab-server]: FAILED! => {"changed": false, "msg": "the remote file does not exist, not transferring, ignored"}
2024-03-29 11:19:11,768 p=40061 u=amin n=ansible | PLAY RECAP *********************************************************************************************************************************************
2024-03-29 11:19:11,768 p=40061 u=amin n=ansible | gitlab-server              : ok=6    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-03-29 11:30:49,367 p=43285 u=amin n=ansible | PLAY [gitlab] ***************************************************************************************************************************
2024-03-29 11:30:49,371 p=43285 u=amin n=ansible | TASK [Gathering Facts] ******************************************************************************************************************
2024-03-29 11:30:51,696 p=43285 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:30:51,709 p=43285 u=amin n=ansible | TASK [gitlab : Update system packages] **************************************************************************************************
2024-03-29 11:30:52,901 p=43285 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:30:52,904 p=43285 u=amin n=ansible | TASK [gitlab : Install dependencies] ****************************************************************************************************
2024-03-29 11:30:54,322 p=43285 u=amin n=ansible | ok: [gitlab-server] => (item=curl)
2024-03-29 11:30:56,041 p=43285 u=amin n=ansible | ok: [gitlab-server] => (item=openssh-server)
2024-03-29 11:30:57,468 p=43285 u=amin n=ansible | ok: [gitlab-server] => (item=ca-certificates)
2024-03-29 11:30:58,884 p=43285 u=amin n=ansible | ok: [gitlab-server] => (item=tzdata)
2024-03-29 11:31:00,205 p=43285 u=amin n=ansible | ok: [gitlab-server] => (item=perl)
2024-03-29 11:31:01,622 p=43285 u=amin n=ansible | ok: [gitlab-server] => (item=postfix)
2024-03-29 11:31:03,344 p=43285 u=amin n=ansible | ok: [gitlab-server] => (item=apt-transport-https)
2024-03-29 11:31:03,351 p=43285 u=amin n=ansible | TASK [gitlab : Check if /etc/gitlab exists] *********************************************************************************************
2024-03-29 11:31:03,884 p=43285 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:31:03,888 p=43285 u=amin n=ansible | TASK [gitlab : Add GitLab repository] ***************************************************************************************************
2024-03-29 11:31:11,608 p=43285 u=amin n=ansible | changed: [gitlab-server]
2024-03-29 11:31:11,612 p=43285 u=amin n=ansible | TASK [gitlab : Install GitLab] **********************************************************************************************************
2024-03-29 11:31:13,421 p=43285 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:31:13,424 p=43285 u=amin n=ansible | TASK [gitlab : Run gitlab reconfigure] **************************************************************************************************
2024-03-29 11:31:13,913 p=43285 u=amin n=ansible | fatal: [gitlab-server]: FAILED! => {"changed": false, "cmd": "gitlab-ctl reconfigure", "msg": "[Errno 2] No such file or directory: b'gitlab-ctl'", "rc": 2, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2024-03-29 11:31:13,913 p=43285 u=amin n=ansible | PLAY RECAP ******************************************************************************************************************************
2024-03-29 11:31:13,913 p=43285 u=amin n=ansible | gitlab-server              : ok=6    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-03-29 11:43:50,530 p=45943 u=amin n=ansible | PLAY [gitlab] ***************************************************************************************************************************
2024-03-29 11:43:50,535 p=45943 u=amin n=ansible | TASK [Gathering Facts] ******************************************************************************************************************
2024-03-29 11:44:00,568 p=45943 u=amin n=ansible | fatal: [gitlab-server]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host gitlab.aminsaedi.bio port 22: Connection timed out", "unreachable": true}
2024-03-29 11:44:00,568 p=45943 u=amin n=ansible | PLAY RECAP ******************************************************************************************************************************
2024-03-29 11:44:00,568 p=45943 u=amin n=ansible | gitlab-server              : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2024-03-29 11:52:14,258 p=48944 u=amin n=ansible | PLAY [gitlab] ***************************************************************************************************************************
2024-03-29 11:52:14,263 p=48944 u=amin n=ansible | TASK [Gathering Facts] ******************************************************************************************************************
2024-03-29 11:52:17,953 p=48944 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:52:17,961 p=48944 u=amin n=ansible | TASK [gitlab : Update system packages] **************************************************************************************************
2024-03-29 11:52:19,198 p=48944 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:52:19,201 p=48944 u=amin n=ansible | TASK [gitlab : Install dependencies] ****************************************************************************************************
2024-03-29 11:52:20,933 p=48944 u=amin n=ansible | ok: [gitlab-server] => (item=curl)
2024-03-29 11:52:22,600 p=48944 u=amin n=ansible | ok: [gitlab-server] => (item=openssh-server)
2024-03-29 11:52:24,110 p=48944 u=amin n=ansible | ok: [gitlab-server] => (item=ca-certificates)
2024-03-29 11:52:25,730 p=48944 u=amin n=ansible | ok: [gitlab-server] => (item=tzdata)
2024-03-29 11:52:27,329 p=48944 u=amin n=ansible | ok: [gitlab-server] => (item=perl)
2024-03-29 11:52:48,515 p=48944 u=amin n=ansible | changed: [gitlab-server] => (item=postfix)
2024-03-29 11:52:50,190 p=48944 u=amin n=ansible | ok: [gitlab-server] => (item=apt-transport-https)
2024-03-29 11:52:50,195 p=48944 u=amin n=ansible | TASK [gitlab : Check if /etc/gitlab exists] *********************************************************************************************
2024-03-29 11:52:50,735 p=48944 u=amin n=ansible | ok: [gitlab-server]
2024-03-29 11:52:50,738 p=48944 u=amin n=ansible | TASK [gitlab : Add GitLab repository] ***************************************************************************************************
2024-03-29 11:52:58,189 p=48944 u=amin n=ansible | changed: [gitlab-server]
2024-03-29 11:52:58,193 p=48944 u=amin n=ansible | TASK [gitlab : Install GitLab] **********************************************************************************************************
2024-03-29 11:59:18,000 p=48944 u=amin n=ansible | changed: [gitlab-server]
2024-03-29 11:59:18,003 p=48944 u=amin n=ansible | TASK [gitlab : Run gitlab reconfigure] **************************************************************************************************
2024-03-29 11:59:33,482 p=48944 u=amin n=ansible | changed: [gitlab-server]
2024-03-29 11:59:33,489 p=48944 u=amin n=ansible | TASK [gitlab : Fetch the root password] *************************************************************************************************
2024-03-29 11:59:34,072 p=48944 u=amin n=ansible | changed: [gitlab-server]
2024-03-29 11:59:34,086 p=48944 u=amin n=ansible | PLAY RECAP ******************************************************************************************************************************
2024-03-29 11:59:34,086 p=48944 u=amin n=ansible | gitlab-server              : ok=8    changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
